- [클라우드 환경에서 주로 사용되는 언어](#클라우드-환경에서-주로-사용되는-언어)
  - [Software Define Anything](#software-define-anything)
  - [멀티 테넌시 (Multi Tenancy)](#멀티-테넌시-multi-tenancy)
  - [가상화 (Hypervisor)](#가상화-hypervisor)
  - [HCI](#hci)
  - [Storage](#storage)
    - [Storage 종류 (물리적 구분)](#storage-종류-물리적-구분)

# 클라우드 환경에서 주로 사용되는 언어

## Software Define Anything

클라우드 환경에서 가상화와 유사한 의미로 사용되는 단어가 *Software Define Anything* 이라는 용어이다. 의미 그대로 **Software 를 통해 정의된(개발된) 어떤 것**을 의미한다. 

* **소프트 웨어 정의 기술** Software-Defined Everything (SDE)
  > 소프트웨어 정의(Software-Defined) 관련 기술을 하나로 통칭하여 부르는 용어
  >
  > | SDE 기술 명칭               |                                     |
  > | --------------------------- | ----------------------------------- |
  > | 소프트웨어 정의 네트워킹    | Software-Defined Networking (SDN)   |
  > | 소프트웨어 정의 스토리지    | Software-Defined Storage (SDS)      |
  > | 소프트웨어 정의 컴퓨팅      | Software-Defined Computing (SDC)    |
  > | 소프트웨어 정의 데이터 센터 | Software-Defined Data Center (SDDC) |


중요한 것은 물리적인 환경에서 벗어나, 각 장비를 정의 (S/W Define) 한다는 것이 중요하다.

크게 생각하면 (네트워크 장비, 방화벽 장비 등) 특정 OS 위에서 동작되는 특정 앱을(Application) **장비**(Appliance) 형태로 구성하여, 클라우드 내에서 관리되는 영역은 별도의 S/W 로 정의된 장비를 사용하도록 구성하는게 일반적이다.

> 예를들어, Legacy 환경에서 Storage 를 연결하기 위해서 변경된 방식을 예로 들 수 있다.
> |              | 방식                                                                              |
> | ------------ | --------------------------------------------------------------------------------- |
> | 기존 방식    | 엔지니어가 특정 스토리지 내 Volume 을 구성하고, 해당 Volume 을 iSCSI 를 통해 연결 |
> | 변경 된 방식 | API 나 S/W 를 통해 사전 정의된 형태로 호출하여 사용                               |


## 멀티 테넌시 (Multi Tenancy)

Cloud 환경을 포함해 대부분의 시스템은 *멀티 테넌트* 환경을 지원한다.

* **테넌트** (Tenant)
  * 소프트웨어 인스턴스에 대해 공통 **특정 접근 권한을 공유하는 사용자들의 그룹**
    > 다수의 사용자가 사용할 수 있게 시스템 어플리케이션이 설계 되어 있다면, 해당 어플리케이션은 멀티 테넌트 를 지원하는 S/W 라고 할 수 있다.

* **멀티 테넌시** (Mulit Tenancy) 
  * **다수의 사용자가 독립된 환경과 공간을 가지고 S/W ㅏ를 사용할 수 있도록 해주는 S/W 아키텍쳐**
    > 웹 어플리케이션 혹은 기타 어플리케이션의 경우 다수의 사용자마다 다른 UI / UX 환경을 제공하기 위해 사용자 계정 혹은 Session 을 통해 사용자의 패턴을 수집하고 동일한 기능을 제공하는 S/W 의 UI / UX 를 변경하여 사용할 수 있게 해준다.
  * 다수의 사용자가 **서로의 간섭이 없어야 함**
    > 특정 사용자의 Bust 상황(?)에도 다른 사용자의 서비스에 영향을 가지 않도록 설계해야함.

<img src="https://lh3.googleusercontent.com/proxy/ymg52J1X0yXfVo_rBtykNJKxRHBDbsVCfxBHuxzLHf83Ns-18-vzKlFgECOih77OmA6M_1lpz2Ci6J6YRxE0fbEirYmtlbuzy-kv1JzIMq4TKX4JRqRnYxcjE6FMSDKcS91BhSO9fOJFmM_yxGrMIT0X2DZtQecFeUA-qmAMrGT9lVOP_LmT5X5X1JHO3C4Y5c8f7sBJxz9tCejsr1pNgT1jlC194sqVzpDkXq-0E-YOwj2YhcfsWrNQkZofhFUk0GFTBpQPtMRYfjdOGFjDReuNMw8ohGX53S-_" width=500>

멀티 테넌시 아키텍쳐 모델은 이와 같이 다양하게 구분될 수 있다.

S/W 관점에서 다양한 사용자에게 동일한 어플리케이션을 다른 형태로 사용할 수 있게 하는 부분을 포함하여, 핵심적으로는 특정 사용자의 Heavy Load 에도 불구하고 다른 사용자에게 영향을 미치지 않도록 설계하는 것이 가장 중요하다.

즉, 이러한 형태를 구현하기 위해 **사용자 별 Container 화 된 격리 공간을 제공**한다거나,
특정 API 혹은 특정 시스템의 호출 부하를 방지하기 위해 **User Level QoS, Threshold 를 적용하는 등의 설계**를 사전에 염두해야 한다.

## 가상화 (Hypervisor)

* *Hypervisor* :: **가상화 머신 모니터** 또는 **가상화 머신 매니저**라고 부름
  * 가상머신을 생성하고 구동하는 소프트웨어, **가상화 된 시스템을 관리하기 위한 플랫폼** 의미
  * 하이퍼바이저 운영 체제와 VM 리소스를 분리해 **VM의 생성과 관리**를 지원
  * 하이퍼바이저로 사용되는 물리 하드웨어 (*호스트*), 리소스를 사용하는 VMs (*게스트*) 라고 부름
  * VM 을 실행하기 위해서는 모든 하이퍼바이자에서 운영체제 수준의 구성 요소가 필요 <small>(메모리 관리 프로그램, 프로세스 스케줄러, I/O(입출력)스택, 기기 드라이버, 보안 관리 프로그램, 네트워크 스택 등)</small>
  * 할당되었던 리소스를 각 VM 에 제공하고, 물리 리소스에 대해 VM 리소스의 일정 관리
  * ~~물리적 하드웨어는 계속해서 실행 작업을 수행하므로 하이퍼 바이저가 일정을 관리하는 동안 CPU 가 VM 에서 요청한대로 CPU 명령을 계속 실행합니다.~~

🤨🤨🤨🤨🤨🤨🤨🤨
  > 일반적으로 호스트 컴퓨터에서 다수의 운영체제를 실행하기 위해 물리적인 디스크를 구분하거나 MBR 을 제어하여 부팅 순서를 바꾸는 등의 작업을 수행하는데 (BootCamp) 이러한 내용도 모두 하이퍼바이저가 처리하는 일로 볼 수 있다.
  
  > 쉽게 Bootcamp 와 Parallers 를 비교하면, Bootcamp 의 경우 특정 OS 구동 전에 구동 시킬 OS 를 결정할 수 있다. OS 가 구동되고 나서 Application 을 통해 별도의 OS 를 구동하는 환경처럼 차이가 있다. 지금은 용어가 잘 정리되어 Native (Baremetal), Hosted 로 구분되어 있다. (예전엔 이 용어에 대한 정의가 명확하지 않아 전가상화/반가상화 형태로도 사용)
  → 기술 변화로 인해 전가상화, 반가상화에 대한 차이도 없어졌다고 생각되며, 이를 전가상화, 반가상화로 구분하는 것이 오히려 이해의 복잡도를 높인다고 판단. (운영체제 레벨에는 반가상화, 전가상화 기준으로 구분하는 것이 더 확실함) 전가상화 내에서도 직접적인 Supervisor Call 이 가능함 

* OS 운영체제
  * 하드웨어를 관리하기 위한 시스템
  * 단순 I/O 이외에 CPU 의 사용까지 모든것 제어
  * 

## HCI

* Nutanix 에서 사용하는 HCI 라는 용어는 클라우드 환경에서 없었던 용어이며, 기술 변화로 인한 신조어와 같은 개념.
* InfraStructure 에 대한 복잡도가 높아짐에 따라 Cloud 환경에서 필요한 시스템(서버, 네트워크, 가상화 및 관리 솔루션) 을 **Block 형태로 묶어서 제공**하는 것을 의미.
* **수평 확장** (Scale-out) 에 따른 **linear한 성능 및 안정성 증가**에 있다는 특징

🤨🤨🤨🤨🤨🤨🤨🤨
* *Storage System* 보유
  * File Block 에 대한 처리방식
  * 근대의 시스템의 성능 중 가장 병목이 많이 발생했던 부분은 CPU / Memory 가 아닌 Disk 였음. Disk 의 IO Block 이 실질적인 병목으로 작용하고 Network 의 Cost 보다 훨씬 많은 Cost 를 사용하는 것으로 확인되었음. 따라서, 한 쪽에 편중된 디스크를 사용하는 것보다 디스크의 내용을 분산 시키고, 성능을 끌어내는 것이 중요하게 되었음. (이에 따라 Nutanix AHV 도 Distributed File System 을 사용하고 있음)


## Storage

네트워크를 통해서 클라이언트들이 접근하여 데이터를 저장, 복사 등 디스크 작업을 할 수 있는 저장 장치

### Storage 종류 (물리적 구분)

| 이름                              |                                                                    |
| --------------------------------- | ------------------------------------------------------------------ |
| **DAS** (Direct Attached Storage) | 데이터 서버와 외장형 저장장치를 전용 케이브블로 직접 접속하는 방식 |
| **NAS** (Network AttachedStorage) | LAN 을 통해 Storage 와 Server 를 접속하는 방식                     |
| **SAN** (Storage Area Network)    | 서버가 fiber channel switch 를 통하여 storage 를 연결하는 방식     |

<img src="https://i0.wp.com/networkwalks.com/wp-content/uploads/2019/11/network-Storage-Types-DAS-NAS-SAN-NW_2.jpg?fit=1423%2C667&ssl=1" width=500>

* DAS
  * SCSI, IDE(Integrated Drive Electronucs), Fiber cable 등의 전용 케이블 이용
  * 전통적인 접속 방법으로 현재도 사용
  * 전용 라인의 사용으로 주어진 성능이 보장되며 안전성이 높음
  * 단점
    * 저장장치에 따른 접속방법이 서로 상이하여 저장장치 공유에 문제가 있음
    * 파일 시스템을 공유하는 기술이 없음
    * 확장성 및 유연성도 상대적으로 떨어짐
* NAS
  * [일반 서버 - 파일 서버 사이]는 TCP/IP 기반으로 LAN 으로 접속되고, [파일 서버 - Storage 사이]에는 SCSI 프로토콜을 기반으로 한 SCSI 또는 Fiber Channel 접속 가능
  * 파일 서버를 통한 파일 시스템 공유
  * 데이터 저장장치와 서버간의 독립성 유지
  * 파일서버와 데이터 저장장치는 전용 케이블로 연결
  * LAN 을 통한 클라이언트, 서버, 파일 서버의 연결
  * 단점
    * 파일 서버에 의해 storage 용량 제한
    * 데이터 접근 요청에 의한 file server 의 병목현상 발생 가능성
    * 파일 서버가 지원하는 storage 종류만 설치 가능 (storage type의 다양성 제한)
    * 파일서버 shutdown 시 storage 접근 불가
* SAN
  * 서버가 fiber channel switch 를 통하여 storage 를 연결하는 기법
  * DAS 의 접속 한계성을 극복하여, n 개의 서버가 m 개의 저장 장치 접속 가능

<img src="https://t1.daumcdn.net/cfile/tistory/2328013B5649651436" width=500>