- [Soket.IO](#soketio)
- [Socket 통신](#socket-통신)
  - [Socket 종류](#socket-종류)
  - [HTTP 통신과 Socket 통신 비교](#http-통신과-socket-통신-비교)
- [리얼타임 웹사이트](#리얼타임-웹사이트)

# Soket.IO

Sokcet.IO 는 리얼타임 앱을 **쉽게** 구현할 수 있게 도와주는 모듈로, 노드의 대표적인 확장 모듈중 하나입니다. 

리얼타입 웹은 구현하기 어렵지만, Socket.IO 를 이용하면 쉽게 구현할 수 있습니다.

# Socket 통신

먼저 Socket 통신이란 무엇인지 알아봅시다.

Socket 은 프로세스가 넓은 네트워크 세계로 데이터를 내보내거나 혹은 그 세계로부터 데이터를 받기 위한 실제적 창구 역할을 합니다. 

그러므로 프로세스가 데이터를 보내거나 받기 위해서는 반드시 소켓을 열어서 소켓에 데이터를 써보내거나 소켓으로부터 데이터를 읽어들여야 합니다.

소켓은 Protocol, IP Address, Port 로 정의됩니다.

* Protocol - 프로토콜
  * 외교상의 언어로, 의례나 *국가간에 약속*을 의미
  * 통신에서는 어떤 시스템이 다른 시스템과 통신을 원활하게 수용하도록 해주는 통신규약, 약속 의미
* IP Address
  * 전 세계 컴퓨터에 부여된 고유의 식별 주소
* Port
  * 네트워크 상에서 통신하기 위해서 호스트 내부적으로 프로세스가 할당받아야 하는 고유한 숫자
  * 한 호스트 내에서 네트워크 통신을 하고 있는 프로세스를 식별하기위해 사용되는 값이므로, 같은 호스트 내에서 서로 다른 프로세스가 같은 포트 넘버를 가질 수 없다. 즉, 같은 컴퓨터 내에서 프로그램을 식별하는 번호.

소켓은 떨어져있는 두 호스트를 연결해주는 도구로써, 데이터를 주고 받을 수 있는 구조체로, 소켓을 통해 데이터 통로가 만들어진다.

이러한 소켓은 역할에 따라 서버소켓, 클라이언트 소켓으로 구분됩니다.

* 서버 (Server)
  * 클라이언트 소켓의 연결 요청을 대기
  * 연결 요청이 오면 클라이언트 소켓을 생성하여 통신이 가능하게 함

    > 1. `socket()` 소켓 생성
    > 2. `bind()` ip 와 port 설정
    > 3. `listen()` 클라이언트의 접근 요청에 수신 대기열을 만들어 몇 개의 클라이언트를 대기 시킬지 결정
    > 4. `accept()` 클라이언트와의 연결 대기

* 클라이언트 (Client)
  * 실제로 데이터 송수신이 일어나는 곳

1. `socket()` 소켓 열기
2. `connect()` 통신할 서버의 설정된 ip, port 번호에 통신 시도
3. 서버의 `accept()` 함수가 클라이언트의 socket descriptor 를 반환
4. 클라이언트와 서버가 서로 `read()`, `write()` 하며 통신 (과정 반복)

## Socket 종류

* 스트림 (TCP)
  * 양방향으로 바이트 스트림 전송, 연결 지향성
  * 오류 수정, 전송 처리, 흐름제어 보장
  * 송신된 순서에 따라 중복되지 않게 데이터 수신 ↦ 오버헤드 발생
  * 소량의 데이터보다 대량의 데이터 전송에 적합 ↦  TCP 사용

* 데이터 그램(UDP)
  * 비연결형 소켓
  * 데이터의 크기에 제한이 있음
  * 확실하게 전달이 보장되지 않음. 데이터가 손실돼도 오류가 발생하지 않음
  * 실시간 멀티미디어 정보를 처리하기 위해 주로 사용

## HTTP 통신과 Socket 통신 비교

* HTTP 통신
  * Client 가 요청을 보내는 경우에만 Server 가 응답하는 **단방향 통신**
  * Server 로부터 응답을 받은 후에는 연결 바로 종료
  * 실시간 연결 X, 필요한 경우에만 Server 로 요청을 보내는 상황에 유용
  * 요청을 보내 Server 의 응답을 기다리는 앱 개발에 주로 사용

* Socket 통신
  * Server - Client  가 특정 Port 를 통해 실시간으로 양방향 통신을 하는 방식
  * Server - Client 가 계속 연결을 유지하는 양방향 통신
  * Server - Client 가 실시간으로 데이터를 주고받는 상황이 필요한 경우에 사용
  * 실시간 동영상 스트리밍이나 온라인 게임등 과 같은 경우에 자주 사용됨

[출처 : helloworld-88 ](https://helloworld-88.tistory.com/215)

# 리얼타임 웹사이트

리얼타임 기술은 **서버 푸시와 관련된 기술**을 이야기합니다.

* 전통적인 웹 브라우저
  * 웹 브라우저가 서버에 요청을 보내면 → 서버가 응답을 돌려주는 방식으로 동작합니다.
  * 웹 브라우저가 서버의 변경사항을 알려면, 다시 요청을 보내야합니다.
  * 사용자들이 웹 사이트에서 새로운 정보를 보기 위해 계속 새로고침을 하는 것은 이러한 이유 때문입니다.

* 화면 갱신없이 새로운 정보를 얻는 방식
  * 일정 주기를 두고 서버에 요청을 보내 화면의 일부만 에이잭스로 갱신하는 방법이 생겼습니다. (폴링 Polling)
  * *폴링*은 일정 간격으로 서버에 요청을 보내는 방식 - 서버의 변경 사항을 즉각적으로 알 수 없고, 다음 요청을 보냈을 때 알 수 있습니다.
  * 요청을 보내는 간격만큼 시간차가 생기므로 리얼타임은 아닙니다.
  * 시간차를 줄이기위한 요청 주기 ↑ 서버 부하 ↑, 트래픽 낭비
  * 코멧(Comet) 기술 발전
    * 롱 폴링(Long Polling), JSONP 폴링, 스트리밍, 포에버 아이프레임
    * **[Web Socket](https://ko.javascript.info/websocket)** :: 웹에서 소켓을 구현함으로서 서버푸시. 코멧에 비해 속도 ↑

코멧과 웹 소켓을 모두 사용해야 대부분의 웹 브라우저에서 리얼타임 웹을 구현할 수 있습니다. 이런 이유로 지금까지 리얼타임 웹을 구현하기 쉽지 않았습니다.

그러나 Socket.IO 를 이용하면, 코멧 + 웹소켓 을 포함한 리얼타임 웹 기술을 추상화해 한가지 인터페이스로 리얼타임 웹을 구현할 수 있습니다.



